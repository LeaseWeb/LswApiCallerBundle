{% extends 'WebProfilerBundle:Profiler:layout.html.twig' %}

{% block toolbar %}
    {% set icon %}
        <img width="22" height="28" alt="API" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAcCAYAAABlL09dAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90DGRcZFJB2DwQAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAACjUlEQVRIx+2Wz0tUURTHP/e+N/PGxpkMbGZcaLgIV46SgUIMtGhhWkKgtOhPEI0QA42YKPoLivZtConSCg3aBLWQdJY6gy2qhSk0pL4Z3xgz8+a2KKdm5jn9GFsEXXiLc+67X875nu+558L/9beXGB0ZkanNrZOmaXbZhUK+FjCllDjo92frffV39Y1PGw3m1uZzy8poQoiaI7UsixZXiyY7Ojt8IDQhBPv1BULBHik1bd/59XjqNF2hnLgCQNc0hJR7EUretlFKUU6hUkrpTqBKKYKhEH19ffh8PkfcQsEmFoux8HrBEVx3OnSooYGJyQnaw+GqKZ/u7+fm9RvMz89X7FXkKYTg3OAg7eEwiUSCy+NjFYd2/R6Ph4krkxhud5E+R2ClFLquM3R+CIDtdIqlpaUK4B/9B7xezg4MkMvl9gYuFGyOtrXhdrl349+jeKX+E5EItp2vFjGEgsGinc/n2E6nK2DL/YHAYQqFKlQIASnTLNrHuo4zNfUAgEzGIplMAhDu6OTho5nif6ZpVqiiBFhKjXh8uWgbhkGoqQnLshgfGyMSifBmZQWv10tjY2OxYIuLMfSyRpPlitjZ+czc7GyJprPZLOvr6wCsrq4W94QQ5PI5nj55jO5y/VzHU/fu0x4O09zcDIDf7+dqNEo6lS5qezf1O7duk/yYRJYV2bHzPqytcS0aZXh4mOC3YgYCQQKBIBnLImNZ5PM2M9PTPJudw+lW1J0aBOD923dcGr1YIfySwy4dKbVfA/5eSInbMP74hpOovzGYFPpX0lXVlH9zPCGklPqR1tadU729JJaX0aRWY5wKl+6iu6c7IV68euk2DCNa5/GcEVJmax3Otm3n4vH4hX/vXfEF9vYDLdA03HYAAAAASUVORK5CYII=" />
        <span class="sf-toolbar-status{% if 5 < collector.callcount %} sf-toolbar-status-yellow{% endif %}">{{ collector.callcount }}</span>
        {% if collector.callcount > 0 %}
            <span class="sf-toolbar-info-piece-additional-detail">in {{ '%0.2f'|format(collector.time * 1000) }} ms</span>
        {% endif %}
        {% if collector.returnedErrorCount > 0 %}
            <span class="sf-toolbar-info-piece-additional sf-toolbar-status sf-toolbar-status-red"> </span>
        {% endif %}
    {% endset %}
    {% set text %}
        <div class="sf-toolbar-info-piece">
            <b>API Calls</b>
            <span>{{ collector.callcount }}</span>
        </div>
        <div class="sf-toolbar-info-piece">
            <b>Total time</b>
            <span>{{ '%0.2f'|format(collector.time * 1000) }} ms</span>
        </div>
        <div class="sf-toolbar-info-piece">
            <b>Errors</b>
            <span class="sf-toolbar-status sf-toolbar-status-{{ collector.returnedErrorCount > 0 ? 'red' : 'green' }}">{{ collector.returnedErrorCount }}</span>
        </div>
    {% endset %}
    {% include 'WebProfilerBundle:Profiler:toolbar_item.html.twig' with { 'link': profiler_url } %}
{% endblock %}

{% block menu %}
<span class="label">
    <span class="icon">
      <img width="32" height="33" alt="API" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAhCAYAAAC4JqlRAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90DGRciClbL3V8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAC9klEQVRYw+2Xv08TYRjHv8/dvZeUhspw59AfiWy1JEpSwQUHdTCiiUZkN62jQBxJHBzVwRDUKCI6mBD5B5zUxFR+FIOUFZfCIkh7oS2ltL3e60Bai70rV0JoTHiTm+7uuc/7PN/n+7xHgwMD91bj8afFos6ICEe1iIC2E20fqf9Wn65pmogmLckolcRdImoKgIAmr2OApgNI9lqG4Ha7IdgUKgeQTCaRzWYhCMLBATjnyOVyGHk2imAw2FCnpNNp3B8cwko8DkEUD1YCURAwPvEGXV1dICLbFwC4XC68Gn8Nt8cDwzAaBygWi+jrv41ARwc453t2zzm3zFi1p8iyjNEXz5HP71i+Iwb8/oc7+XzNB1T1JB49eVwJqOs6AoEABAK6u89basXv92M7u4WengvgnMPhcIAxGUuxmGkJLTMQCofMRSPtr9vyM0QEzjkuXr4EmTH7JWCSBP9pv2XaGhs6BK/XC6fTaRrPFEBiDIqqHup8ONN5FqVSyR4AEcHpdB6q4ZxqbzftBksA65zWNxbR4n3GGGBSAsm8nQwUCgXIsvw3sCgiEolYZqbcql+/ReBwtNTcX1tbB5m4oul2SnoJyURyj2iICKqqoqVlN7imaQiH7qD36hV8+fyponhFUU0hFxcWIJo4oilAoVjE6upK3VKMjb1EbHERG783MDQ4ULd0mqYhkUjY9wHOOaY+TNV1vbVf60CV9WYyGUtnXIrFUCgU7AMQEaJzc5ifi1ZS+++SmQRZlsEYg8yY6aQsf3B0ZMRyI9R34ybfTKVq6DjncLla8X5yslL36mcSiQR2crnK+PV4PHtGb1mUD4aHMT09Y+mgQj0HS6XSuBsOYyuTqQFUFAVenw9enw8+n69m7huGgXcTbzE7M1vXvi0zUB3I5WpF77XrECV7p3fOge/RKH4uL4MEoa6Y9wUop1PX9YacTxTFfU9DDR3JmMU0Oz4V//8AzfonLItb6DwX5M2A2B1cCmj+x8KEqqihowYgAjZTqe0//VcdSxbB1vAAAAAASUVORK5CYII=" />
    </span>
    <strong>API CALLS</strong>
    <span class="count">
        <span>{{ collector.callcount }}</span>
        <span>{{ '%0.0f'|format(collector.time * 1000) }} ms</span>
    </span>
</span>
{% endblock %}

{% block panel %}
    <h2>API Calls</h2>

    {% if not collector.callcount %}
        <p>
            <em>No calls.</em>
        </p>
    {% else %}
        <ul class="alt">
            {% for i, call in collector.calls %}
                <li class="{{ i is odd ? 'odd' : 'even' }}">
                    <div>
                        <strong>Status</strong>: {{ call.status }}<br />
                        <strong>URL</strong>: {{ call.url }}<br />
                        <strong>Type</strong>: {{ call.type }}<br />
                        <strong>Request</strong>: {{ call.requestData|length }} bytes
                          <a href="data:text/plain;,{{ call.requestData|url_encode(true) }}">raw</a>
                          <a href="data:text/html;,{{ call.requestData|url_encode(true) }}">html</a>
                          <a href="data:text/plain;,{{ call.requestObject|url_encode(true) }}">parsed</a>
                          <br />
                        <strong>Response</strong>: {{ call.responseData|length }} bytes
                          <a href="data:text/plain;,{{ call.responseData|url_encode(true) }}">raw</a>
                          <a href="data:text/html;,{{ call.responseData|url_encode(true) }}">html</a>
                          <a href="data:text/plain;,{{ call.responseObject|url_encode(true) }}">parsed</a>
                          <br />
                    </div>
                    <small>
                        <strong>Time</strong>: {{ '%0.2f'|format(call.executionMS * 1000) }} ms
                    </small>
                </li>
            {% endfor %}
        </ul>
    {% endif %}

{% endblock %}